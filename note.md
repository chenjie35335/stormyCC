# 词法分析 语法分析

- Flex描述词法部分，需要使用的为.l文件
- Bison描述语法部分，需要使用的为.y文件
  
```C
// 这里写一些选项, 可以控制 Flex/Bison 的某些行为

%{

// 这里写一些全局的代码
// 因为最后要生成 C/C++ 文件, 实现主要逻辑的部分都是用 C/C++ 写的
// 难免会用到头文件, 所以通常头文件和一些全局声明/定义写在这里

%}

// 这里写一些 Flex/Bison 相关的定义
// 对于 Flex, 这里可以定义某个符号对应的正则表达式
// 对于 Bison, 这里可以定义终结符/非终结符的类型

%%

// 这里写 Flex/Bison 的规则描述
// 对于 Flex, 这里写的是 lexer 扫描到某个 token 后做的操作
// 对于 Bison, 这里写的是 parser 遇到某种语法规则后做的操作

%%

// 这里写一些用户自定义的代码
// 比如你希望在生成的 C/C++ 文件里定义一个函数, 做一些辅助工作
// 你同时希望在之前的规则描述里调用你定义的函数
// 那么, 你可以把 C/C++ 的函数定义写在这里, 声明写在文件开头

```

C++语法部分讲解：

```C++
class BaseAST {
 public:
  virtual ~BaseAST() = default;
};
```
以上的代码定义了一个BaseAST类，这个类其实是一个抽象类（对应Java）
virtual函数是个虚函数，必须重写，default表示默认调用编译器生成的析构函数
~表示的是析构函数，是回收的时候调用的？


```C++
  virtual void Dump() const = 0;
```
* virtual: 这是一个虚函数，意味着它可以在派生类中被重写（override）。

* const: 这个关键字表明这个函数是一个常量成员函数，即它不能修改对象的任何数据成员。
* = 0: 这表示这是一个纯虚函数。纯虚函数是一种特殊类型的虚函数，在基类中声明但不提供实现（即没有函数体）。派生类必须提供该函数的实现，除非派生类也是抽象类。